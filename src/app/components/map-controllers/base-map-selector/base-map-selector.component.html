<button mat-fab  (click)="toggle()" type="button" cdkOverlayOrigin #trigger="cdkOverlayOrigin" [class]="{'active':isOpen}">
  <mat-icon>
    public
  </mat-icon>
</button>

<!-- This template displays the overlay content and is connected to the button -->
<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="isOpen"
  (detach)="isOpen = false"
>
  <div class="base-layer-control">
     <div class="base-layer-control-header">
       <div class="title">BASE LAYERS</div>
       <div class="close-button" (click)="isOpen = false"><mat-icon>close</mat-icon></div>
    </div>
    <div class="base-layer-icon-container">
         @for (mapType of mapTypes; track $index) {
            <div class="base-layer-icon-group" >
              <div class="base-layer-button" >
                <button mat-fab [style.backgroundImage]="'url(' + mapType.imageUrl + ')'"
                [style.backgroundSize]="'cover'"
                [style.backgroundPosition]="'center center'"
                (click)="selectMapType(mapType.id)"
                [class]="{'active-basemap-icon': activeMapTypeId === mapType.id}"
                >
                </button>

              </div>
              <div class="base-layer-button-label">{{ mapType.name }}</div>
            </div>
         }

    </div>

  </div>
</ng-template>
